(function(e){function t(t){for(var r,o,s=t[0],u=t[1],c=t[2],l=0,p=[];l<s.length;l++)o=s[l],a[o]&&p.push(a[o][0]),a[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var s=n[o];0!==a[s]&&(r=!1)}r&&(i.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},o={app:0},a={app:0},i=[];function s(e){return u.p+"js/"+({"app.account":"app.account","app.find":"app.find","app.join":"app.join","app.room":"app.room"}[e]||e)+"."+{"app.account":"7fd774b0","app.find":"d2845bc6","app.join":"14e29df9","app.room":"c2b9d314"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"app.account":1,"app.room":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise(function(t,n){for(var r="css/"+({"app.account":"app.account","app.find":"app.find","app.join":"app.join","app.room":"app.room"}[e]||e)+"."+{"app.account":"70ca3672","app.find":"31d6cfe0","app.join":"31d6cfe0","app.room":"b31d9569"}[e]+".css",o=u.p+r,a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var s=a[i],c=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(c===r||c===o))return t()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){s=l[i],c=s.getAttribute("data-href");if(c===r||c===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||o,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.request=r,n(a)},p.href=o;var d=document.getElementsByTagName("head")[0];d.appendChild(p)}).then(function(){o[e]=0}));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise(function(t,n){r=a[e]=[t,n]});t.push(r[2]=i);var c,l=document.getElementsByTagName("head")[0],p=document.createElement("script");p.charset="utf-8",p.timeout=120,u.nc&&p.setAttribute("nonce",u.nc),p.src=s(e),c=function(t){p.onerror=p.onload=null,clearTimeout(d);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+r+": "+o+")");i.type=r,i.request=o,n[1](i)}a[e]=void 0}};var d=setTimeout(function(){c({type:"timeout",target:p})},12e4);p.onerror=p.onload=c,l.appendChild(p)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var p=0;p<c.length;p++)t(c[p]);var d=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"008d":function(e,t,n){},"034f":function(e,t,n){"use strict";var r=n("c21b"),o=n.n(r);o.a},"33d4":function(e,t,n){"use strict";var r=n("d4fa"),o=n.n(r);o.a},"3ae6":function(e,t,n){"use strict";var r=n("c2bd"),o=n.n(r);o.a},"472a":function(e,t,n){e.exports=n.p+"img/CheckersMainMenuGraphic.a4098a9a.png"},"4e8f":function(e,t,n){"use strict";var r=n("008d"),o=n.n(r);o.a},"6e4e":function(e,t,n){"use strict";var r=n("d271"),o=n.n(r);o.a},"9da3":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-alert",{attrs:{show:e.showError,variant:"danger"}},[e._v("There was an error upgrading your account. Please try again - you will not be charged twice.")]),n("b-button",{ref:"btn",attrs:{variant:"success"},on:{click:function(t){return t.preventDefault(),e.open(t)}}},[e._v("Remove Ads")])],1)},o=[],a=n("9ab4"),i=n("2b0e"),s=i["a"].extend({data:function(){return{handler:null,showError:!1}},mounted:function(){var e=this,t=document.createElement("script");t.src="https://checkout.stripe.com/checkout.js",t.onload=function(){e.handler=StripeCheckout.configure({key:"pk_test_QFyYavGnzjs8kSHLHL1AKW0N",image:"https://stripe.com/img/documentation/checkout/marketplace.png",source:function(t){return e.upgrade(t.id,t.owner.email)}})},this.$refs.btn.appendChild(t)},methods:{open:function(){this.handler.open({name:"OnlineCheckersPlatform",description:"Remove Ads",amount:50})},upgrade:function(e,t){return a["a"](this,void 0,void 0,function(){var n;return a["b"](this,function(r){switch(r.label){case 0:return[4,this.$http.post("/user/upgrade",{stripeEmail:t,stripeToken:e})];case 1:return n=r.sent().isSuccess,n?(this.$root.$data.user.isPremium=!0,this.showError=!1):this.showError=!0,[2]}})})}}}),u=s,c=n("2877"),l=Object(c["a"])(u,r,o,!1,null,null,null);l.options.__file="Upgrade.vue";t["a"]=l.exports},c21b:function(e,t,n){},c2bd:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var r=n("bc3a"),o=n.n(r),a=n("9f7b"),i=(n("2dd8"),n("f9e3"),n("2b0e")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[n("router-view"),e.$user&&e.$user.isPremium?e._e():n("div",{staticClass:"ad"},[n("h1",{attrs:{id:"sampleAd"}},[e._v("This is an ad. Upgrade now")])])],1)},u=[],c=i["a"].extend({name:"App"}),l=c,p=(n("034f"),n("3ae6"),n("2877")),d=Object(p["a"])(l,s,u,!1,null,"b32c9272",null);d.options.__file="App.vue";var f=d.exports,h=n("8c4f"),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("h1",[e._v("Welcome to Checkers")]),r("sign-in"),e.$user?r("b-container",{staticClass:"center"},[e.$user.isPremium?e._e():r("b-row",[r("b-col",[r("upgrade")],1)],1),r("b-row",[r("b-col",[r("b-button",{attrs:{to:"/room",size:"lg",variant:"primary"}},[e._v("Create A Game Room")])],1)],1),r("b-row",[r("b-col",[r("b-button",{attrs:{to:"/find",size:"lg",variant:"primary"}},[e._v("Find A Game Room")])],1)],1),r("b-row",[r("b-col",[r("b-button",{attrs:{to:"/account",size:"lg",variant:"primary"}},[e._v("Account")])],1)],1)],1):e._e(),r("img",{attrs:{id:"StartScreen",src:n("472a"),alt:"Start Screen"}})],1)},v=[],b=n("ecaa"),g=n("9da3"),_=i["a"].extend({name:"home",components:{SignIn:b["a"],Upgrade:g["a"]}}),$=_,y=(n("4e8f"),Object(p["a"])($,m,v,!1,null,"4cfeaf47",null));y.options.__file="Home.vue";var w=y.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$user?n(e.component,{tag:"component"}):n("sign-in")},j=[],k=n("9ab4"),O=i["a"].extend({name:"UserGuard",props:{component:Function},components:{SignIn:b["a"]},created:function(){return k["a"](this,void 0,void 0,function(){var e,t,n,r;return k["b"](this,function(o){switch(o.label){case 0:return this.$user?[3,2]:[4,this.$http.get("/user")];case 1:e=o.sent(),e.isSuccess&&e.data&&(t=e.data,n=t.id,r=t.name,this.$user={id:n,name:r}),o.label=2;case 2:return[2]}})})}}),E=O,x=Object(p["a"])(E,S,j,!1,null,null,null);x.options.__file="UserGuard.vue";var P=x.exports;i["a"].use(h["a"]);var C=new h["a"]({base:"/",routes:[{path:"/",name:"home",component:w},{path:"/find",component:P,props:{component:function(){return n.e("app.find").then(n.bind(null,"4b19"))}}},{path:"/room",component:P,props:{component:function(){return n.e("app.room").then(n.bind(null,"a899"))}}},{path:"/join/:token",component:function(){return n.e("app.join").then(n.bind(null,"e636"))}},{path:"/account",name:"account",component:P,props:{component:function(){return n.e("app.account").then(n.bind(null,"8266"))}}},{path:"*",redirect:"/"}]});n.d(t,"httpClient",function(){return I}),i["a"].use(a["a"]),i["a"].config.productionTip=!1;var I=o.a.create({baseURL:"https://api-onlinecheckersplatform.us-east-2.elasticbeanstalk.com",withCredentials:!0,headers:{"X-Requested-With":"XMLHttpRequest"},validateStatus:function(){return!0}});I.interceptors.response.use(function(e){return e.isSuccess=e.status>=200&&e.status<300,e.isError=e.status>=400,e},function(e){return Promise.reject(e)}),i["a"].prototype.$http=I,i["a"].prototype.$production=!0,Object.defineProperty(i["a"].prototype,"$user",{get:function(){return this.$root.$data.user},set:function(e){this.$root.$data.user=e}}),new i["a"]({data:{user:null},router:C,render:function(e){return e(f)}}).$mount("#app")},d271:function(e,t,n){},d2b3:function(e,t,n){"use strict";var r=n("dc7e"),o=n.n(r);o.a},d4fa:function(e,t,n){},dc7e:function(e,t,n){},ecaa:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.$user?[n("h1",{staticClass:"center"},[e._v("Welcome, "+e._s(e.$user.name)+"!")]),n("b-container",{staticClass:"center"},[n("b-row",[n("b-col",[n("b-button",{on:{click:e.onSignedOut}},[e._v("Sign Out")])],1)],1)],1)]:[n("b-row",[n("b-col",[e.$production?e._e():n("dev-sign-in")],1)],1),n("b-row",{staticClass:"my-3"},[n("b-col",[n("google-sign-in")],1)],1)]],2)},o=[],a=n("9ab4"),i=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form",{ref:"form",attrs:{inline:"",novalidate:"",validated:e.validated}},[n("b-form-input",{staticClass:"mr-2",attrs:{placeholder:"User ID",required:""},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}}),n("b-button",{staticClass:"mx-2",attrs:{variant:"primary"},on:{click:e.submit}},[e._v("Sign In")])],1)},u=[],c=i["a"].extend({data:function(){return{id:"",isPremium:!1,validated:!1}},methods:{submit:function(){return a["a"](this,void 0,Promise,function(){var e,t,n,r,o=this;return a["b"](this,function(i){switch(i.label){case 0:return this.$refs.form.checkValidity()?[4,this.$http.post("/auth/local",{id:this.id})]:(this.validated=!0,[2]);case 1:return i.sent(),[4,this.$http.get("/user")];case 2:return e=i.sent().data,t=e.userId,n=e.isPremium,r=e.name,this.$user={id:t,isPremium:n,name:r,socialSignOut:function(){return a["a"](o,void 0,void 0,function(){return a["b"](this,function(e){return[2,null]})})}},[2]}})})}}}),l=c,p=(n("33d4"),n("2877")),d=Object(p["a"])(l,s,u,!1,null,"3cbe8a0a",null);d.options.__file="DevSignIn.vue";var f=d.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:e.elementId}})},m=[],v=0,b=i["a"].extend({name:"GoogleSignIn",data:function(){return{uid:v++}},computed:{elementId:function(){return"google-signin-"+this.uid}},mounted:function(){var e=this;gapi.signin2.render(this.elementId,{onfailure:function(){return e.$emit("signInFailed")},onsuccess:function(t){return e.signIn(t)}})},methods:{signIn:function(e){return a["a"](this,void 0,Promise,function(){var t,n,r,o,i,s,u,c,l=this;return a["b"](this,function(p){switch(p.label){case 0:return t=e.getAuthResponse().id_token,[4,this.$http.post("/auth/google",{token:t},{validateStatus:function(e){return e>=200&&e<300}})];case 1:return n=p.sent().isError,n?(console.error("error authenticating with google"),[2]):[4,this.$http.get("/user")];case 2:return r=p.sent(),o=r.data,i=r.isError,i?(console.error("error retrieving user data"),[2]):(s=o.userId,u=o.isPremium,c=o.name,this.$user={id:s,isPremium:u,name:c,socialSignOut:function(){return a["a"](l,void 0,void 0,function(){return a["b"](this,function(e){return gapi.auth2.getAuthInstance().signOut(),[2]})})}},[2])}})})}}}),g=b,_=(n("6e4e"),Object(p["a"])(g,h,m,!1,null,"05222d8a",null));_.options.__file="GoogleSignIn.vue";var $=_.exports,y=i["a"].extend({components:{DevSignIn:f,GoogleSignIn:$},methods:{onSignedOut:function(){return a["a"](this,void 0,Promise,function(){var e;return a["b"](this,function(t){switch(t.label){case 0:return this.$user&&this.$user.socialSignOut?[4,this.$user.socialSignOut()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[4,this.$http.delete("/auth")];case 3:return e=t.sent(),e.isError?(console.error(e),[2]):(this.$user=null,this.$emit("signedOut"),[2])}})})}}}),w=y,S=(n("d2b3"),Object(p["a"])(w,r,o,!1,null,"66637486",null));S.options.__file="SignIn.vue";t["a"]=S.exports}});
//# sourceMappingURL=app.75c5b816.js.map