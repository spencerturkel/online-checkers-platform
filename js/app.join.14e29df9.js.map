{"version":3,"sources":["webpack:///./src/Join.vue?0afb","webpack:///./src/Join.vue?dbcc","webpack:///./src/Join.vue?d3b1","webpack:///./src/Join.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","auth","_e","on","submit","attrs","label","label-for","description","id","type","required","model","value","callback","$$v","guestName","expression","variant","staticRenderFns","Joinvue_type_script_lang_ts_","vue_runtime_esm","extend","name","components","SignIn","data","created","_a","$http","head","_b","sent","isSuccess","join","methods","post","response","isError","console","error","$router","replace","get","$user","token","$route","params","status","watch","src_Joinvue_type_script_lang_ts_","component","Object","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"iHAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,MAAAJ,EAAAM,GAAA,gBAAAN,EAAAO,KAAohBP,EAAAQ,MAAphBJ,EAAA,WAAAA,EAAA,MAAAJ,EAAAM,GAAA,6BAAAF,EAAA,UAAsIK,IAAIC,OAAAV,EAAAU,UAAqBN,EAAA,gBAAqBO,OAAOC,MAAA,aAAAC,YAAA,YAAAC,YAAA,mDAA4GV,EAAA,gBAAqBO,OAAOI,GAAA,YAAAC,KAAA,OAAAC,SAAA,IAA6CC,OAAQC,MAAAnB,EAAA,UAAAoB,SAAA,SAAAC,GAA+CrB,EAAAsB,UAAAD,GAAkBE,WAAA,gBAAyB,GAAAnB,EAAA,YAAqBO,OAAOK,KAAA,UAAAQ,QAAA,aAAsCxB,EAAAM,GAAA,sBAC7mBmB,yCC8BeC,EAAAC,EAAA,KAAIC,QACjBC,KAAM,OACNC,YAAcC,OAAMA,EAAA,MACpBC,KAAM,WAAM,OAAGzB,MAAM,EAAOe,UAAW,KACjCW,QAAO,mHACE,OAAbC,EAAAjC,MAAa,EAAMA,KAAKkC,MAAMC,KAAK,wBAAnCF,EAAK3B,KAAQ8B,EAAAC,OAAgCC,UAEzCtC,KAAKM,MACP,EAAMN,KAAKuC,SADT,YACFH,EAAAC,wCAGJG,SACQ/B,OAAM,yHACK,SAAMT,KAAKkC,MAAMO,KAAK,eACnCb,KAAM5B,KAAKqB,oBAGb,OAJIqB,EAAWN,EAAAC,OAIXK,EAASC,SAEXC,QAAQC,MAAMH,GACd1C,KAAK8C,QAAQC,QAAQ,MACrB,KAGS,EAAM/C,KAAKkC,MAAMc,IAAI,iBAEhC,OAFAN,EAAWN,EAAAC,OAEPK,EAASC,SAEXC,QAAQC,MAAMH,IACd,KAGIT,EAAeS,EAASX,KAAtBjB,EAAEmB,EAAAnB,GAAEc,EAAIK,EAAAL,KAChB5B,KAAKiD,OAAUnC,GAAEA,EAAEc,KAAIA,cAEnBW,KAAI,mHACS,SAAMvC,KAAKkC,MAAMO,KAAK,eACrCS,MAAOlD,KAAKmD,OAAOC,OAAOF,uBADtBR,EAAWT,EAAAI,OAIbK,EAASJ,WACXtC,KAAK8C,QAAQC,QAAQ,kBADnB,mBAE2B,MAApBL,EAASW,QAAT,MACT,EAAMrD,KAAKkC,MAAMO,KAAK,uBACtB,OADAR,EAAAI,QACA,EAAMrC,KAAKuC,sBAAXN,EAAAI,oBAGAO,QAAQC,MAAMH,GACd1C,KAAK8C,QAAQC,QAAQ,uCAI3BO,OACQL,MAAK,6GACT,SAAMjD,KAAKuC,sBAAXN,EAAAI,oBCrF6TkB,EAAA,cCOnUC,EAAgBC,OAAAC,EAAA,KAAAD,CACdF,EACAzD,EACA0B,GACF,EACA,KACA,KACA,MAIAgC,EAAAG,QAAAC,OAAA,WACeC,EAAA,WAAAL","file":"js/app.join.14e29df9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(\"Joining...\")]),(!_vm.auth)?[_c('sign-in'),_c('h2',[_vm._v(\"Or, sign in as a guest:\")]),_c('b-form',{on:{\"submit\":_vm.submit}},[_c('b-form-group',{attrs:{\"label\":\"Guest Name\",\"label-for\":\"guestName\",\"description\":\"This is the name that your opponent will see.\"}},[_c('b-form-input',{attrs:{\"id\":\"guestName\",\"type\":\"text\",\"required\":\"\"},model:{value:(_vm.guestName),callback:function ($$v) {_vm.guestName=$$v},expression:\"guestName\"}})],1),_c('b-button',{attrs:{\"type\":\"primary\",\"variant\":\"primary\"}},[_vm._v(\"Submit\")])],1)]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue';\n\nimport SignIn from './user-account/SignIn.vue';\n\n/**\n * This is the view that is rendered when an invitation link is clicked.\n * An unknown user will be prompted to provide a display name,\n * and then they will be logged in as a guest.\n * When the user is authenticated, they will join the expected game.\n */\nexport default Vue.extend({\n  name: 'Join',\n  components: { SignIn },\n  data: () => ({ auth: false, guestName: '' }),\n  async created() {\n    this.auth = (await this.$http.head('/user')).isSuccess;\n\n    if (this.auth) {\n      await this.join();\n    }\n  },\n  methods: {\n    async submit() {\n      let response = await this.$http.post('/auth/guest', {\n        name: this.guestName,\n      });\n\n      if (response.isError) {\n        // TODO: report error\n        console.error(response);\n        this.$router.replace('/');\n        return;\n      }\n\n      response = await this.$http.get('/user');\n\n      if (response.isError) {\n        // TODO: report error\n        console.error(response);\n        return;\n      }\n\n      const { id, name } = response.data;\n      this.$user = { id, name };\n    },\n    async join() {\n      const response = await this.$http.post('/room/join/', {\n        token: this.$route.params.token,\n      });\n\n      if (response.isSuccess) {\n        this.$router.replace('/room/');\n      } else if (response.status === 400) {\n        await this.$http.post('/room/leave');\n        await this.join();\n      } else {\n        // TODO: report error\n        console.error(response);\n        this.$router.replace('/');\n      }\n    },\n  },\n  watch: {\n    async $user() {\n      await this.join();\n    },\n  },\n});\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??ref--12-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Join.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??ref--12-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Join.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Join.vue?vue&type=template&id=0ee32f0e&\"\nimport script from \"./Join.vue?vue&type=script&lang=ts&\"\nexport * from \"./Join.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Join.vue\"\nexport default component.exports"],"sourceRoot":""}