(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app.join"],{e636:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("Joining...")]),t.auth?t._e():[n("sign-in"),n("h2",[t._v("Or, sign in as a guest:")]),n("b-form",{on:{submit:t.submit}},[n("b-form-group",{attrs:{label:"Guest Name","label-for":"guestName",description:"This is the name that your opponent will see."}},[n("b-form-input",{attrs:{id:"guestName",type:"text",required:""},model:{value:t.guestName,callback:function(e){t.guestName=e},expression:"guestName"}})],1),n("b-button",{attrs:{type:"primary",variant:"primary"}},[t._v("Submit")])],1)]],2)},s=[],i=n("9ab4"),a=n("2b0e"),u=n("ecaa"),o=a["a"].extend({name:"Join",components:{SignIn:u["a"]},data:function(){return{auth:!1,guestName:""}},created:function(){return i["a"](this,void 0,void 0,function(){var t;return i["b"](this,function(e){switch(e.label){case 0:return t=this,[4,this.$http.head("/user")];case 1:return t.auth=e.sent().isSuccess,this.auth?[4,this.join()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})},methods:{submit:function(){return i["a"](this,void 0,void 0,function(){var t,e,n,r;return i["b"](this,function(s){switch(s.label){case 0:return[4,this.$http.post("/auth/guest",{name:this.guestName})];case 1:return t=s.sent(),t.isError?(console.error(t),this.$router.replace("/"),[2]):[4,this.$http.get("/user")];case 2:return t=s.sent(),t.isError?(console.error(t),[2]):(e=t.data,n=e.id,r=e.name,this.$user={id:n,name:r},[2])}})})},join:function(){return i["a"](this,void 0,void 0,function(){var t;return i["b"](this,function(e){switch(e.label){case 0:return[4,this.$http.post("/room/join/",{token:this.$route.params.token})];case 1:return t=e.sent(),t.isSuccess?(this.$router.replace("/room/"),[3,6]):[3,2];case 2:return 400!==t.status?[3,5]:[4,this.$http.post("/room/leave")];case 3:return e.sent(),[4,this.join()];case 4:return e.sent(),[3,6];case 5:console.error(t),this.$router.replace("/"),e.label=6;case 6:return[2]}})})}},watch:{$user:function(){return i["a"](this,void 0,void 0,function(){return i["b"](this,function(t){switch(t.label){case 0:return[4,this.join()];case 1:return t.sent(),[2]}})})}}}),c=o,h=n("2877"),l=Object(h["a"])(c,r,s,!1,null,null,null);l.options.__file="Join.vue";e["default"]=l.exports}}]);
//# sourceMappingURL=app.join.14e29df9.js.map